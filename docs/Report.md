# **Описание программы**

Программа предназначена для упрощения и автоматизации работы ивент-агентства. В ней предусмотрены следующий функционал:

- Создание и учет информации по мероприятию: название, описание, время и дата проведения, место проведения, бюджет мероприятия.
- Продажа и возврат билетов на мероприятие.
- Назначение ответственных сотрудников за конкретное мероприятие.
- Учет посетителей, сбор их контактов: телефонов и электронных адресов.
- Сбор аналитики по мероприятию, финансовый результат, заполняемость.
- Учет сотрудников: персональные данные, должность, уровень доступа к информации, логин и пароль в системе.

Для реализации программы была выбрана база данных SQL Light, как наиболее простая, но при этом позволяющая решить все поставленные задачи.

## Структура баз данных

В ходе реализации было создано 4 таблицы:

- Таблица мероприятий.
- Таблица гостей.
- Таблица билетов.
- Таблица сотрудников.

Подробная информация по всем полям данных таблиц представлена ниже:

Основная таблица, содержащая сведения о мероприятиях.

  **Поле**               **Комментарий**              **Тип*
event_id               Идентификатор                INTEGER PRIMARY KEY
event_title            Заголовок                     TEXT
event_synopsis         Описание                     TEXT
event_start_dt         Дата время начала             yyyy-mm-dd hh:mm
event_final_dt         Дата время окончания         yyyy-mm-dd hh:mm
event_location         Место проведения             TEXT
event_age_restriction  возрастная категория         INTEGER  в пределах от 0 до 21
event_budget           Расходы организатора         REAL
event_comment          Любой дополнительный текст   TEXT

### Таблица "visitors" (посетители мероприятий)

Содержит доступную (не всегда полную) информацию о посетителях мероприятий.

  **Поле**               **Комментарий*               **Тип**
visitor_id             Идентификатор                INTEGER PRIMARY KEY
visitor_full_name      ФИО                          TEXT
visitor_email          Электронный адрес            TEXT
visitor_phone          Номер телефона               TEXT

### Таблица employees (сотрудники)

Содержит сведения о сотрудниках, организующих и координирующих мероприятия, и сведения о допуске к инструментам приложения "Event Concentrator".

  **Поле**               **Комментарий                **Тип**
employee_id            Идентификатор                INTEGER PRIMARY KEY
employee_full_name     ФИО                          TEXT
employee_position      Должность, роль              TEXT
employee_login         Имя пользователя в системе   TEXT
employee_passwd        Хеш пароля                   TEXT
employee_access_level  Уровень доступа              INTEGER меняется от 0 до 3
employee_comment       Любой дополнительный текст   TEXT

### Таблица "tickets" (билеты)

  **Поле**               **Комментарий**              **Тип**
ticket_id              Идентификатор                INTEGER PRIMARY KEY
ticket_event_id        Идентификатор мероприятия    INTEGER
                                                    FOREIGN KEY (ticket_event_id) REFERENCES events(event_id)
ticket_visitor_id      Идентификатор гостя          INTEGER DEFAULT NULL
                                                    FOREIGN KEY (ticket_visitor_id) REFERENCES Visitors(visitor_id)
ticket_price           Цена                         REAL

### Связывающая таблица events_employees

  **Поле**               **Комментарий**              **Тип**
event_id               Идентификатор мероприятия    INTEGER
                                                    FOREIGN KEY (event_id) REFERENCES events(event_id)
employee_id      Идентификатор сотрудника           INTEGER
                                                    FOREIGN KEY (employee_id) REFERENCES employees(employee_id)
		
Беседа № 3: 

Вот переписанный текст в формате Markdown:

## Диаграмма структурирования

Для большей наглядности, связи таблиц представлены на диаграмме в приложении.

## Меню программы

Меню программы представляет древовидную структуру со стандартизованным меню. Основных веток 4:

1. **События**  
   Здесь можно:
   - создать,
   - отредактировать (обновить),
   - удалить событие,
   - вывести весь список событий.  
   Отдельными пунктами идет работа с билетами:
   - добавление билетов к событию,
   - просмотр билетов по событию (разбивка по проданным и свободным билетам).

2. **Посетители**  
   Здесь можно:
   - внести нового посетителя в базу,
   - удалить из базы,
   - отредактировать его данные,
   - продать ему билет или вернуть уже купленный,
   - вывести список всех посетителей.

3. **Сотрудники**  
   Здесь можно:
   - добавить нового сотрудника,
   - отредактировать данные у существующего,
   - удалить сотрудника,
   - назначить ответственным за мероприятие,
   - вывести список всех сотрудников.

4. **Отчеты**  
   Здесь можно получить отчет по интересующему мероприятию или посетителю.

## Навигация и ввод данных

В каждом меню есть возможность вернуться на уровень выше. Вводимые данные проверяются на соответствие типу; при ошибке ввода пользователю предлагается повторить ввод. При обновлении записей пользователь может вводить только изменившиеся данные, не заполняя поля, которые не меняются.   
Навигация по меню осуществляется при помощи цифровых кодов, вводимых с консоли.

## Сценарии использования

### Меню "События"

1. **Добавление события**  
   Пользователь заходит в меню события и выбирает "добавить". Далее он последовательно заполняет:
   - Название,
   - Синопсис,
   - Дата и время начала и окончания (программа проверяет, что начало предшествует окончанию),
   - Место проведения,
   - Возрастная категория,
   - Затраты на проведение,
   - Количество и цену билетов.  
   Программа подтверждает создание события и указанного числа билетов информационным сообщением.

2. **Просмотр событий**  
   В меню событий пользователь может вывести список всех событий с указанием количества мест и цены.

3. **Обновление события**  
   У пользователя последовательно спрашиваются все параметры события, если параметр не меняется, заполнять его не нужно.

4. **Удаление события**  
   Пользователь указывает Id события, после чего программа запрашивает подтверждение, и при его получении удаляет событие.

5. **Добавление билетов**  
   Пользователь может добавить к существующему событию новые билеты. Программа запрашивает Id мероприятия, цену и количество добавляемых билетов. Данная функция позволяет создавать мероприятия с несколькими классами билетов.

6. **Статистика по мероприятию**  
   Пользователь может просмотреть информацию по билетам в разрезе мероприятий с указанием свободных и проданных.

### Меню "Посетитель"

1. **Создание нового гостя**  
   Программа последовательно запрашивает ФИО, электронную почту и телефон. При создании программа выдает подтверждающее сообщение.

2. **Просмотр посетителей**  
   Выводит список всех записей из базы данных посетителей.

3. **Обновление информации о посетителе**  
   Аналогично событию, необновляемые поля заполнять не нужно.

4. **Удаление посетителя**.

5. **Продажа билета**  
   Программа просит указать Id посетителя и мероприятия. Проверяется наличие свободных мест. При успешной покупке выводится краткая информация с посетителем, названием мероприятия и датой начала.

6. **Возврат билета**  
   Программа запрашивает Id посетителя и мероприятия, проверяет, есть ли данный билет у посетителя; при совпадении возвращает билет, меняя его статус на свободный.


## Меню "Сотрудники"

1. **Добавление сотрудника**  
   Программа последовательно запрашивает:
   - ФИО,
   - Должность,
   - Логин,
   - Пароль,
   - Уровень доступа к системе,
   - Дополнительный комментарий.  
   Успешное добавление подтверждается сообщением.

2. **Просмотр списка сотрудников**  
   Выводит всех сотрудников со всеми полями.

3. **Обновление данных сотрудника**  
   Аналогично предыдущим меню, необновляемые поля заполнять не нужно.

4. **Удаление сотрудника**  
   Программа запросит подтверждение.

## Меню "Отчеты"

5. **Назначение сотрудника организатором события**  
   Выбирается Id сотрудника и мероприятия.

## Тестирование
Файл db_module.db частично был протестирован с помощью библиотеки для тестирования pytest, тесты покрывают создание подключения, его удаления, добавление записей в таблицы, обновление записей, удаление записей, а также некоторых дополнительных функций.
Остальные файлы были протестированы в ручном режиме, без использования дополнительного инструментала. В ходе ручного тестирования багов или какого-либо неожиданного поведения программы выявлено не было.

## Возможные направления развития проекта

- Добавление дополнительных характеристик (пол, возраст, наличие детей) посетителей для более детальной статистики. Это потребует стимулирования посетителей для добровольной передачи данных, но может дать лучшие результаты таргетированных приглашений на новые мероприятия.
  
- Анализ мероприятий не только в разрезе посетителей, но и в разрезе сотрудников. Учет эффективности организации мероприятий по сотрудникам.
  
- Развитие системы в небольшую CRM, закрепление посетителей за сотрудниками, добавление информации о последнем контакте, сбор обратной связи о мероприятиях.
  
- Более удобный интерфейс, работа не через консоль, а с собственным интерфейсом.
